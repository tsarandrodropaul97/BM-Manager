<nav class="navbar navbar-light navbar-vertical navbar-expand-xl" style="display: none;">
	<script>
		var navbarStyle = localStorage.getItem("navbarStyle");
		if (navbarStyle && navbarStyle !== 'transparent') {
			document.querySelector('.navbar-vertical').classList.add(`navbar-${navbarStyle}`);
		}
	</script>
	<div class="d-flex align-items-center">
		<div class="toggle-icon-wrapper">
			<button class="btn navbar-toggler-humburger-icon navbar-vertical-toggle" data-bs-toggle="tooltip" data-bs-placement="left" title="Toggle Navigation">
				<span class="navbar-toggle-icon">
					<span class="toggle-line"></span>
				</span>
			</button>
		</div>
		<a class="navbar-brand" href="{{ path('app_dashboard') }}">
			<div class="d-flex align-items-center py-3">
				<div class="me-3" style="width: 44px; height: 44px; background: linear-gradient(135deg, #0d6efd, #6f42c1); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(13, 110, 253, 0.25); transition: transform 0.2s ease;">
					<span style="color: white; font-weight: 700; font-size: 14px; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; letter-spacing: -0.5px;">BM</span>
				</div>
				<span style="color: #ffffff; font-weight: 600; font-size: 20px; font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; letter-spacing: -0.3px;">BailManager</span>
			</div>
		</a>
	</div>

	<div class="collapse navbar-collapse" id="navbarVerticalCollapse">
		<div class="navbar-vertical-content scrollbar">
			<ul class="navbar-nav flex-column mb-3" id="navbarVerticalNav">
				
				<!-- SECTION 1: PILOTAGE (Visible par défaut ou selon rôles) -->
				<li class="nav-item">
					<a class="nav-link" href="{{ path('app_dashboard') }}" role="button">
						<div class="d-flex align-items-center">
							<span class="nav-link-icon"><span class="fas fa-home"></span></span>
							<span class="nav-link-text ps-1">Accueil / Dashboard</span>
						</div>
					</a>
				</li>

				{% if is_granted('ROLE_ADMIN') %}
					<!-- SECTION 2: ANALYSE & RAPPORTS (PRO) -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Pilotage</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						<a class="nav-link dropdown-indicator" href="#rapports" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="rapports">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-chart-line"></span></span>
								<span class="nav-link-text ps-1">Rapports & Stats</span>
							</div>
						</a>
						<ul class="nav collapse" id="rapports">
							<li class="nav-item"><a class="nav-link" href="{{ path('app_revenu_locatif') }}">Revenus locatifs</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_taux_occupation') }}">Taux d'occupation</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_finance') }}">Analyse financière</a></li>
						</ul>
					</li>

					<!-- SECTION 3: PARC IMMOBILIER & LOCATAIRE (PRO) -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Gestion Locative</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						
						<!-- Biens -->
						<a class="nav-link dropdown-indicator" href="#biens" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="biens">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-building"></span></span>
								<span class="nav-link-text ps-1">Patrimoine</span>
							</div>
						</a>
						<ul class="nav collapse" id="biens">
							<li class="nav-item"><a class="nav-link" href="{{ path('app_biens_index') }}">Liste des biens</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_biens_new') }}">Ajouter un bien</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_categorie') }}">Catégories</a></li>
						</ul>

						<!-- Locataires & Contrats -->
						<a class="nav-link dropdown-indicator" href="#locataires-contrats" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="locataires-contrats">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-user-friends"></span></span>
								<span class="nav-link-text ps-1">Baux & Clients</span>
							</div>
						</a>
						<ul class="nav collapse" id="locataires-contrats">
							<li class="nav-item"><a class="nav-link" href="{{ path('app_locataire_index') }}">Fichiers Locataires</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_contrat_index') }}">Contrats de bail</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_contrat_new') }}">Nouveau contrat</a></li>
						</ul>
					</li>

					<!-- SECTION 4: FINANCES (PRO) -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Finance & Compta</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						
						<!-- Loyers -->
						<a class="nav-link dropdown-indicator" href="#loyers" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="loyers">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-wallet"></span></span>
								<span class="nav-link-text ps-1">Flux Loyers</span>
							</div>
						</a>
						<ul class="nav collapse" id="loyers">
							<li class="nav-item"><a class="nav-link" href="#">Encaissements</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Suivi des Impayés</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Quittances & Avis</a></li>
						</ul>

						<!-- Comptabilité -->
						<a class="nav-link dropdown-indicator" href="#compta" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="compta">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-calculator"></span></span>
								<span class="nav-link-text ps-1">Comptabilité</span>
							</div>
						</a>
						<ul class="nav collapse" id="compta">
							<li class="nav-item"><a class="nav-link" href="#">Journal Recettes</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Journal Dépenses</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Facturation</a></li>
						</ul>
					</li>

					<!-- SECTION 5: TECHNIQUE & MAINTENANCE -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Opérations</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						<a class="nav-link dropdown-indicator" href="#maintenance" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="maintenance">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-tools"></span></span>
								<span class="nav-link-text ps-1">Maintenance</span>
							</div>
						</a>
						<ul class="nav collapse" id="maintenance">
							<li class="nav-item"><a class="nav-link" href="{{ path('app_maintenance') }}">Vue d'ensemble</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Interventions</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Prestataires</a></li>
						</ul>
					</li>

					<!-- SECTION 6: ADMINISTRATION -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Administration</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						<a class="nav-link dropdown-indicator" href="#admin" role="button" data-bs-toggle="collapse" aria-expanded="false" aria-controls="admin">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-cogs"></span></span>
								<span class="nav-link-text ps-1">Paramètres</span>
							</div>
						</a>
						<ul class="nav collapse" id="admin">
							<li class="nav-item"><a class="nav-link" href="#">Propriétaires</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Utilisateurs</a></li>
							<li class="nav-item"><a class="nav-link" href="{{ path('app_profile') }}">Mon Profil</a></li>
							<li class="nav-item"><a class="nav-link" href="#">Documents types</a></li>
						</ul>
					</li>

				{% else %}
					
					<!-- SECTION LOCATAIRE (ROLE_USER ONLY) -->
					<li class="nav-item">
						<div class="row navbar-vertical-label-wrapper mt-3 mb-2">
							<div class="col-auto navbar-vertical-label">Mon Espace Client</div>
							<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
						</div>
						
						<!-- Mon Dossier -->
						{% if app.user and app.user.locataire %}
							<a class="nav-link" href="{{ app.user.locataire.contrats|length > 0 ? path('app_contrat_show', {'id': app.user.locataire.contrats.first.id}) : '#' }}" role="button">
								<div class="d-flex align-items-center">
									<span class="nav-link-icon"><span class="fas fa-file-signature"></span></span>
									<span class="nav-link-text ps-1">Mon Contrat de Bail</span>
								</div>
							</a>
						{% endif %}

						<a class="nav-link" href="{{ path('app_profile') }}" role="button">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-user-circle"></span></span>
								<span class="nav-link-text ps-1">Mes Informations</span>
							</div>
						</a>

						<a class="nav-link" href="#" role="button">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-receipt"></span></span>
								<span class="nav-link-text ps-1">Mes Quittances</span>
							</div>
						</a>

						<a class="nav-link" href="#" role="button">
							<div class="d-flex align-items-center">
								<span class="nav-link-icon"><span class="fas fa-exclamation-triangle"></span></span>
								<span class="nav-link-text ps-1">Signaler un Problème</span>
							</div>
						</a>
					</li>
				{% endif %}

				<!-- AIDE (Visible pour tous) -->
				<li class="nav-item">
					<div class="row navbar-vertical-label-wrapper mt-4 mb-2">
						<div class="col ps-0"><hr class="mb-0 navbar-vertical-divider"/></div>
					</div>
					<a class="nav-link" href="#" role="button">
						<div class="d-flex align-items-center">
							<span class="nav-link-icon"><span class="fas fa-question-circle"></span></span>
							<span class="nav-link-text ps-1">Aide & Support</span>
						</div>
					</a>
				</li>
			</ul>
		</div>
	</div>
</nav>
