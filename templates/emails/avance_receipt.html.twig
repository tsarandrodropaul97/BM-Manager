<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 1.5; color: #1a202c; background-color: #ffffff; margin: 0; padding: 0; }
        .wrapper { padding: 40px; }
        .container { max-width: 700px; margin: 0 auto; border: 1px solid #d1d5db; padding: 50px; }
        .receipt-header { border-bottom: 2px solid #1a202c; padding-bottom: 20px; display: flex; justify-content: space-between; align-items: flex-end; }
        .brand { font-size: 24px; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; color: #1a202c; }
        .title { text-align: right; }
        .title h1 { margin: 0; font-size: 18px; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em; }
        .info-section { margin-top: 40px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
        .info-block h3 { font-size: 12px; text-transform: uppercase; color: #6b7280; margin-bottom: 10px; border-bottom: 1px solid #e5e7eb; padding-bottom: 5px; }
        .info-block p { font-size: 14px; margin: 0; font-weight: 600; }
        .details-table { width: 100%; margin-top: 50px; border-collapse: collapse; }
        .details-table th { text-align: left; font-size: 12px; text-transform: uppercase; color: #6b7280; padding: 10px 0; border-bottom: 1px solid #e5e7eb; }
        .details-table td { padding: 20px 0; border-bottom: 1px solid #f3f4f6; }
        .total-row { margin-top: 30px; text-align: right; }
        .total-amount { font-size: 24px; font-weight: 800; color: #1a202c; }
        .status-stamp { border: 2px solid #059669; color: #059669; padding: 8px 15px; display: inline-block; font-weight: 800; font-size: 14px; text-transform: uppercase; border-radius: 4px; margin-top: 20px; }
        .footer { margin-top: 100px; padding-top: 20px; border-top: 1px solid #e5e7eb; font-size: 11px; color: #9ca3af; text-align: center; }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container">
            <div style="display: table; width: 100%; border-bottom: 2px solid #1a202c; padding-bottom: 20px;">
                <div style="display: table-cell; vertical-align: bottom;">
                    <div class="brand">BM Manager</div>
                </div>
                <div style="display: table-cell; text-align: right; vertical-align: bottom;">
                    <h1 style="margin: 0; font-size: 18px; color: #4b5563; text-transform: uppercase; letter-spacing: 0.05em;">Reçu d'Avance</h1>
                </div>
            </div>

            <div style="display: table; width: 100%; margin-top: 40px;">
                <div style="display: table-cell; width: 50%; padding-right: 20px;">
                    <h3 style="font-size: 11px; text-transform: uppercase; color: #6b7280; margin-bottom: 5px;">Reçu de</h3>
                    <p style="font-size: 14px; margin: 0; font-weight: 600;">{{ locataire.nomComplet }}</p>
                    <p style="font-size: 13px; color: #4b5563; margin-top: 5px;">{{ locataire.bien ? locataire.bien.designation : 'Client' }}</p>
                </div>
                <div style="display: table-cell; width: 50%; text-align: right;">
                    <h3 style="font-size: 11px; text-transform: uppercase; color: #6b7280; margin-bottom: 5px;">Propriétaire</h3>
                    <p style="font-size: 14px; margin: 0; font-weight: 600;">{{ ownerName }}</p>
                    <p style="font-size: 13px; color: #4b5563; margin-top: 5px;">{{ ownerPhone }}</p>
                </div>
            </div>

            <table class="details-table">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th style="text-align: right;">Date de validation</th>
                        <th style="text-align: right;">Référence</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Avance sur loyer convenue</td>
                        <td style="text-align: right;">{{ "now"|date("d/m/Y") }}</td>
                        <td style="text-align: right;">AV-{{ avance.id }}-{{ "now"|date("Y") }}</td>
                    </tr>
                </tbody>
            </table>

            <div class="total-row">
                <div style="font-size: 12px; color: #6b7280; text-transform: uppercase; margin-bottom: 5px;">Montant Total Payé</div>
                <div class="total-amount">{{ avance.montantTotal|number_format(0, ',', ' ') }} Ar</div>
                <div class="status-stamp">Validé & Encaissé</div>
            </div>

            <div style="margin-top: 40px; font-size: 13px; font-weight: 500; font-style: italic;">
                Ce document atteste du versement effectué et validé par les deux parties. 
                Le montant sera déduit conformément aux termes du contrat.
            </div>

            <div class="footer">
                Document généré électroniquement par BM Manager | {{ "now"|date("d/m/Y H:i") }}<br>
                Ceci est un document officiel ne nécessitant pas de signature manuscrite.
            </div>
        </div>
    </div>
</body>
</html>
